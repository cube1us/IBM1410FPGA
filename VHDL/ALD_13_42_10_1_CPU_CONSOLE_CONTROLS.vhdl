-- VHDL for IBM SMS ALD page 13.42.10.1
-- Title: CPU-CONSOLE CONTROLS
-- IBM Machine Name 1411
-- Generated by GenerateHDL at 10/23/2020 1:58:38 PM

-- Included from HDLTemplate.vhdl

library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.NUMERIC_STD.ALL;  -- For use in test benches only
use WORK.ALL;

-- End of include from HDLTemplate.vhdl

entity ALD_13_42_10_1_CPU_CONSOLE_CONTROLS is
	    Port (
		FPGA_CLK:		 in STD_LOGIC;
		PS_CLOCK_STOPPED:	 in STD_LOGIC;
		PS_LOGIC_GATE_Z:	 in STD_LOGIC;
		MS_NO_LAST_GATE:	 in STD_LOGIC;
		MS_LOGIC_GATE_W:	 in STD_LOGIC;
		MS_LAST_LOGIC_GATE_1:	 in STD_LOGIC;
		MS_LOGIC_GATE_R:	 in STD_LOGIC;
		MS_LOGIC_GATE_A_1:	 in STD_LOGIC;
		PS_1ST_CLOCK_PULSE_1:	 in STD_LOGIC;
		MS_STOP_KEY_LATCH:	 in STD_LOGIC;
		MS_1401_COND_TEST_OP_CODE:	 in STD_LOGIC;
		MS_STORAGE_SCAN_LOAD:	 in STD_LOGIC;
		PS_MASTER_ERROR:	 in STD_LOGIC;
		PS_CONS_STOP_PRINT_COMPLETE:	 in STD_LOGIC;
		M36_VOLTS:	 in STD_LOGIC;
		MS_PROGRAM_RESET_1:	 in STD_LOGIC;
		PS_LOGIC_GATE_B_1:	 in STD_LOGIC;
		PS_PROCESS_ROUTINE:	 in STD_LOGIC;
		MS_LAST_EX_DOT_NEXT_TO_LAST:	 in STD_LOGIC;
		MS_I_O_LAST_EX_DOT_Z:	 in STD_LOGIC;
		SWITCH_ROT_CHECK_CTRL_DK2:	 in STD_LOGIC_VECTOR(5 downTo 0);
		MC_CPU_READY_TO_TID:	 out STD_LOGIC;
		MS_STOPPED_AT_CYCLE_END:	 out STD_LOGIC;
		PS_STOPPED_AT_CYCLE_END:	 out STD_LOGIC;
		MS_ERROR_RESTART:	 out STD_LOGIC;
		PS_STOPPED_AT_LAST_EXEC_CYCLE:	 out STD_LOGIC;
		MS_AUTOMATIC_COMPUTER_RESET:	 out STD_LOGIC;
		MS_GATE_BIT_SENSE_SWITCH:	 out STD_LOGIC;
		MV_ERROR_CTRL_RESET_DOT_RESTART:	 out STD_LOGIC);
end ALD_13_42_10_1_CPU_CONSOLE_CONTROLS;

architecture behavioral of ALD_13_42_10_1_CPU_CONSOLE_CONTROLS is 

	signal OUT_5A_H: STD_LOGIC;
	signal OUT_4B_E: STD_LOGIC;
	signal OUT_3B_P: STD_LOGIC;
	signal OUT_1B_H: STD_LOGIC;
	signal OUT_4C_C: STD_LOGIC;
	signal OUT_3C_NoPin: STD_LOGIC;
	signal OUT_2C_R: STD_LOGIC;
	signal OUT_4D_G: STD_LOGIC;
	signal OUT_4D_G_Latch: STD_LOGIC;
	signal OUT_3D_C: STD_LOGIC;
	signal OUT_3D_C_Latch: STD_LOGIC;
	signal OUT_2D_C: STD_LOGIC;
	signal OUT_1D_C: STD_LOGIC;
	signal OUT_4E_NoPin: STD_LOGIC;
	signal OUT_3E_D: STD_LOGIC;
	signal OUT_2E_P: STD_LOGIC;
	signal OUT_1E_C: STD_LOGIC;
	signal OUT_4F_X: STD_LOGIC;
	signal OUT_2F_C: STD_LOGIC;
	signal OUT_1F_P: STD_LOGIC;
	signal OUT_5G_K: STD_LOGIC;
	signal OUT_5G_A: STD_LOGIC;
	signal OUT_3G_C: STD_LOGIC;
	signal OUT_5H_F: STD_LOGIC;
	signal OUT_3H_G: STD_LOGIC;
	signal OUT_2H_C: STD_LOGIC;
	signal OUT_5I_NoPin: STD_LOGIC;
	signal OUT_4I_F: STD_LOGIC;
	signal OUT_4I_F_Latch: STD_LOGIC;
	signal OUT_3I_E: STD_LOGIC;
	signal OUT_3I_E_Latch: STD_LOGIC;
	signal OUT_2I_P: STD_LOGIC;
	signal OUT_DOT_4C: STD_LOGIC;
	signal OUT_DOT_2F: STD_LOGIC;
	signal OUT_DOT_3I: STD_LOGIC;

begin

	OUT_5A_H <= PS_CLOCK_STOPPED;
	OUT_4B_E <= NOT(MS_LOGIC_GATE_W AND PS_LOGIC_GATE_Z AND MS_LAST_LOGIC_GATE_1 );
	OUT_3B_P <= NOT(OUT_4B_E AND MS_NO_LAST_GATE );

	SMS_AEK_1B: entity SMS_AEK
	    port map (
		IN1 => OUT_2C_R,	-- Pin P
		OUT1 => OUT_1B_H,
		IN2 => OPEN );

	OUT_4C_C <= NOT(MS_LOGIC_GATE_R AND MS_LOGIC_GATE_A_1 );
	OUT_3C_NoPin <= NOT(PS_CONS_STOP_PRINT_COMPLETE AND OUT_DOT_4C AND PS_CLOCK_STOPPED );
	OUT_2C_R <= NOT OUT_3C_NoPin;
	OUT_4D_G_Latch <= NOT(OUT_3D_C AND PS_1ST_CLOCK_PULSE_1 AND MS_STOP_KEY_LATCH );
	OUT_3D_C_Latch <= NOT(OUT_4D_G AND OUT_1E_C AND OUT_2H_C );
	OUT_2D_C <= NOT(OUT_2C_R AND OUT_DOT_3I );
	OUT_1D_C <= NOT OUT_2D_C;
	OUT_4E_NoPin <= NOT(MS_STORAGE_SCAN_LOAD AND MS_1401_COND_TEST_OP_CODE );
	OUT_3E_D <= NOT OUT_4E_NoPin;
	OUT_2E_P <= NOT(MS_STOP_KEY_LATCH AND PS_CONS_STOP_PRINT_COMPLETE );
	OUT_1E_C <= OUT_1F_P;
	OUT_4F_X <= OUT_5G_K;
	OUT_2F_C <= NOT(PS_MASTER_ERROR AND OUT_3G_C );

	SingleShot_1F: entity SingleShot
	    generic map(PULSETIME => 1000, CLOCKPERIOD => 10)
	    port map (
		FPGA_CLK => FPGA_CLK,
		IN3 => OUT_DOT_2F,	-- Pin L
		OUT1 => OUT_1F_P,
		IN1 => OPEN,
		IN2 => OPEN );

	OUT_5G_K <= NOT SWITCH_ROT_CHECK_CTRL_DK2(3);
	OUT_5G_A <= NOT SWITCH_ROT_CHECK_CTRL_DK2(1);
	OUT_3G_C <= NOT(OUT_4F_X );
	OUT_5H_F <= OUT_5G_A;
	OUT_3H_G <= NOT(OUT_5H_F );
	OUT_2H_C <= NOT(OUT_3H_G AND PS_MASTER_ERROR AND PS_CONS_STOP_PRINT_COMPLETE );
	OUT_5I_NoPin <= NOT(PS_LOGIC_GATE_B_1 AND PS_PROCESS_ROUTINE );
	OUT_4I_F_Latch <= NOT(OUT_5I_NoPin AND OUT_DOT_3I );
	OUT_3I_E_Latch <= NOT(OUT_4I_F AND MS_PROGRAM_RESET_1 AND MS_LAST_EX_DOT_NEXT_TO_LAST );
	OUT_2I_P <= NOT(MS_I_O_LAST_EX_DOT_Z );
	OUT_DOT_4C <= OUT_3B_P OR OUT_4C_C;
	OUT_DOT_2F <= OUT_2E_P OR OUT_2F_C;
	OUT_DOT_3I <= OUT_3I_E OR OUT_2I_P;

	MC_CPU_READY_TO_TID <= OUT_5A_H;
	MS_STOPPED_AT_CYCLE_END <= OUT_1B_H;
	PS_STOPPED_AT_CYCLE_END <= OUT_2C_R;
	MS_ERROR_RESTART <= OUT_4D_G;
	PS_STOPPED_AT_LAST_EXEC_CYCLE <= OUT_1D_C;
	MS_GATE_BIT_SENSE_SWITCH <= OUT_3E_D;
	MS_AUTOMATIC_COMPUTER_RESET <= OUT_1E_C;
	MV_ERROR_CTRL_RESET_DOT_RESTART <= OUT_4F_X;

	Latch_4D: entity DFlipFlop port map (
		C => FPGA_CLK,
		D => OUT_4D_G_Latch,
		Q => OUT_4D_G,
		QBar => OPEN );

	Latch_3D: entity DFlipFlop port map (
		C => FPGA_CLK,
		D => OUT_3D_C_Latch,
		Q => OUT_3D_C,
		QBar => OPEN );

	Latch_4I: entity DFlipFlop port map (
		C => FPGA_CLK,
		D => OUT_4I_F_Latch,
		Q => OUT_4I_F,
		QBar => OPEN );

	Latch_3I: entity DFlipFlop port map (
		C => FPGA_CLK,
		D => OUT_3I_E_Latch,
		Q => OUT_3I_E,
		QBar => OPEN );


end;
